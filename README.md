# üöÄ Pathly V2.0 - Intelligent Job Application SaaS

**DSGVO & NIS2 Compliant | AI-Powered | Chrome Extension Hybrid**

---

## üéØ Vision

Pathly automatisiert die Jobsuche und Bewerbung unter **strikter Einhaltung** von:
- ‚úÖ DSGVO Art. 22 (keine vollautomatischen Entscheidungen ohne menschliche Kontrolle)
- ‚úÖ NIS2 (Cyber-Resilienz)
- ‚úÖ Ethical AI (Human-in-the-Loop)

---

## üèóÔ∏è Architektur-Paradigma

### The Hybrid Model

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CLOUD (Backend)                    ‚îÇ
‚îÇ  - Job Discovery (Cron)             ‚îÇ
‚îÇ  - Company Research (Perplexity)    ‚îÇ
‚îÇ  - AI Generation (Claude Sonnet)    ‚îÇ
‚îÇ  - Status: ready_for_review         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  DASHBOARD (Next.js)                ‚îÇ
‚îÇ  - User reviews & approves          ‚îÇ
‚îÇ  - Edits cover letters              ‚îÇ
‚îÇ  - Status: ready_to_apply           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CHROME EXTENSION (Plasmo)          ‚îÇ
‚îÇ  - Fills forms automatically        ‚îÇ
‚îÇ  - User clicks Submit (Compliance!) ‚îÇ
‚îÇ  - Status: submitted                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Warum kein vollautomatisches System?**
1. **Rechtlich:** DSGVO Art. 22 verbietet automatisierte Entscheidungen ohne menschliche Kontrolle
2. **Technisch:** Captchas, 2FA, individuelle Formulare
3. **Qualit√§t:** Halluzinationen m√ºssen verhindert werden

---

## ‚ú® Features

### Phase 1: Manuelle Bewerbung ‚úÖ
- üìÑ CV & Cover Letter Upload
- üé® Template Auswahl (Notion-Style, Classic, ATS-Optimized)
- üîç Job Scraping (StepStone, LinkedIn, Indeed)
- ü§ñ AI-Powered Cover Letter (mit Schreibstil-Analyse)
- üè¢ Company Research (Perplexity API)
- üí¨ Quote Generator (3 relevante Zitate zur Auswahl)
- ‚úÖ **Manual Application Tracking** (sch√∂ne Tabelle)

### Phase 2: Automatische Bewerbung üöß
- ‚è∞ Daily Job Scout (mit Jitter gegen Rate Limits)
- üß† Smart Filtering (Blacklist, Skill Match)
- ü§ñ Chrome Extension (Plasmo Framework)
- üìä Inbox-Style Dashboard
- üîê Human-in-the-Loop Enforcement

---

## üõ†Ô∏è Tech Stack v3.1

| Layer | Technology | Purpose |
|-------|-----------|----------|
| **Frontend** | Next.js 15 + React 19 | Dashboard & Landing |
| **UI** | Tailwind + shadcn/ui | Beautiful Components |
| **State** | Zustand + React Query | Client vs Server State |
| **Validation** | Zod + React Hook Form | Type-Safe Forms |
| **Backend** | Supabase (PostgreSQL) | Database + Auth + Storage |
| **AI Generation** | Claude Sonnet 4.5 | Cover Letter Generation |
| **AI Judge** | Claude Haiku 4 | Quality Scoring |
| **AI Controller** | GPT-4o-mini | Job Routing & Classification |
| **Embeddings** | OpenAI text-embedding-3-small | Writing Style Similarity |
| **Research** | Perplexity Sonar Pro | Company Intelligence |
| **Scraping Tier 1** | Firecrawl | JS-heavy sites (LinkedIn, Greenhouse) |
| **Scraping Tier 2** | SerpAPI | Google Jobs aggregator |
| **Scraping Tier 3** | ScraperAPI | Anti-bot bypass |
| **Scraping Fallback** | Playwright | Local, always works |
| **Email** | Resend | Transactional Emails |
| **Extension** | Plasmo Framework | Chrome Extension |
| **Deploy** | Vercel | Hosting |

### üîÑ Smart Scraping System

Pathly uses an **intelligent 5-tier fallback system**:

```
Firecrawl (Modern, JS-heavy) ‚Üí SerpAPI (Google Jobs) ‚Üí 
ScraperAPI (Anti-bot) ‚Üí BrightData (LinkedIn) ‚Üí Playwright (Local)
```

**See [docs/SCRAPING_STRATEGY.md](./docs/SCRAPING_STRATEGY.md) for complete details.**

---

## üìÇ Repository Structure

```
job-automation-saas/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md          # Complete System Design
‚îÇ   ‚îú‚îÄ‚îÄ SCRAPING_STRATEGY.md     # Smart Fallback Logic ‚ú® NEW
‚îÇ   ‚îú‚îÄ‚îÄ WORKFLOWS.md             # Step-by-Step Processes
‚îÇ   ‚îî‚îÄ‚îÄ API.md                   # API Documentation
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql               # PostgreSQL Schema
‚îÇ   ‚îú‚îÄ‚îÄ migrations/              # Supabase Migrations
‚îÇ   ‚îî‚îÄ‚îÄ seed.sql                 # Test Data
‚îú‚îÄ‚îÄ app/                         # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manual-apply/        # Manual Application Flow
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auto-apply/          # Automated Inbox
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ history/             # Application History Table ‚ú® NEW
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jobs/scrape/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ research/company/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cover-letter/generate/
‚îÇ   ‚îî‚îÄ‚îÄ (landing)/               # Marketing Pages
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ApplicationHistoryTable.tsx  # ‚ú® NEW
‚îÇ   ‚îú‚îÄ‚îÄ CVTemplateSelector.tsx
‚îÇ   ‚îî‚îÄ‚îÄ QuoteSelector.tsx            # ‚ú® NEW
‚îú‚îÄ‚îÄ chrome-extension/            # Plasmo Extension
‚îÇ   ‚îú‚îÄ‚îÄ background/
‚îÇ   ‚îú‚îÄ‚îÄ content-script.tsx
‚îÇ   ‚îî‚îÄ‚îÄ popup.tsx
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ cron-job-scout.py        # Daily Job Discovery
‚îÇ   ‚îî‚îÄ‚îÄ worker-queue.py          # Background Processor
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ scrapers/                # Scraping implementations ‚ú® NEW
‚îÇ       ‚îú‚îÄ‚îÄ firecrawl.ts
‚îÇ       ‚îú‚îÄ‚îÄ serpapi.ts
‚îÇ       ‚îú‚îÄ‚îÄ scraperapi.ts
‚îÇ       ‚îî‚îÄ‚îÄ playwright.ts
‚îú‚îÄ‚îÄ CLAUDE.md                    # Agent Instructions
‚îî‚îÄ‚îÄ .env.example
```

---

## üöÄ Getting Started

### Prerequisites
```bash
Node.js 20+
Python 3.11+
Supabase CLI
Chrome (for Extension)
```

### Installation
```bash
# Clone
git clone https://github.com/yannikgaletto-art/job-automation-saas.git
cd job-automation-saas

# Install Dependencies
npm install
pip install -r requirements.txt

# Setup Environment
cp .env.example .env.local
# Add your API keys (see .env.example for details)

# Setup Database
supabase db reset

# Run Dev Server
npm run dev
```

### Chrome Extension Dev
```bash
cd chrome-extension
npm install
npm run dev

# Load in Chrome:
# chrome://extensions -> Load unpacked -> ./chrome-extension/build/chrome-mv3-dev
```

---

## üìä Database Schema Highlights

### Key Tables
- `user_profiles` - User data with encrypted PII
- `documents` - Uploaded CVs with style embeddings
- `job_queue` - Scraped jobs with status tracking
- `company_research` - Perplexity API cache ‚ú® NEW
- `application_history` - **Double-apply prevention** + visual table ‚ú® NEW
- `form_selectors` - Learning system for form filling
- `scraping_logs` - Performance tracking for all scrapers ‚ú® NEW

### Compliance Features
- ‚úÖ Row Level Security (RLS) on all tables
- ‚úÖ Encrypted PII (name, email, phone, address)
- ‚úÖ Consent tracking with versioning
- ‚úÖ Audit logs for all AI generations

---

## üé® Writing Style Analysis

Pathly uses a **3-stage generation process**:

1. **Generation** (Claude Sonnet 4.5)
   - Analyzes user's uploaded cover letters
   - Extracts: tone, sentence structure, vocabulary
   - Integrates company research
   - Uses conjunctions ("Daher", "Deshalb") for naturalness

2. **Judge** (Claude Haiku 4)
   - Scores: Naturalness, Style Match, Relevance, Individuality
   - Minimum score: 8/10
   - Max 3 iterations

3. **Human Review**
   - User edits in Notion-style editor
   - Auto-save every 2 seconds

---

## üí∞ Pricing Model

| Tier | Price | Features |
|------|-------|----------|
| **Free** | ‚Ç¨0/mo | 5 manual applications/mo |
| **Starter** | ‚Ç¨29/mo | 50 auto applications/mo + research |
| **Pro** | ‚Ç¨79/mo | Unlimited + priority support |

**Break-Even:** 5 users @ ‚Ç¨29/mo = ‚Ç¨145/mo (covers MVP costs)

---

## üîê Security & Compliance

### DSGVO Compliance
- ‚úÖ Consent Management (versioned)
- ‚úÖ Right to be Forgotten (cascade delete)
- ‚úÖ Data Portability (JSON export)
- ‚úÖ Encryption at Rest & Transit

### NIS2 Compliance
- ‚úÖ Incident Response Plan
- ‚úÖ Supply Chain Security (Vendor Audits)
- ‚úÖ Backup & Recovery (Supabase Point-in-Time)

---

## üìà Roadmap

### Q1 2026 (MVP)
- [x] Manual application flow
- [x] Application history tracking ‚ú® NEW
- [x] Smart scraping fallback system ‚ú® NEW
- [ ] Chrome Extension Beta
- [ ] 10 Beta Users

### Q2 2026 (Launch)
- [ ] Automated job scout
- [ ] Perplexity integration
- [ ] Public Launch
- [ ] 100 Paying Users

### Q3 2026 (Scale)
- [ ] Interview Prep AI
- [ ] Salary Negotiation Coach
- [ ] 1,000 Users

---

## üí∏ Cost Breakdown

| Service | MVP (0-100 users) | Scale (100-1000 users) |
|---------|-------------------|------------------------|
| **Firecrawl** | ‚Ç¨20/mo (500 req) | ‚Ç¨99/mo (10k req) |
| **SerpAPI** | ‚Ç¨50/mo (5k searches) | ‚Ç¨50/mo |
| **OpenAI** | ‚Ç¨5/mo | ‚Ç¨50/mo |
| **Perplexity** | ‚Ç¨20/mo (50 calls) | ‚Ç¨200/mo (500 calls) |
| **Claude** | ‚Ç¨100/mo | ‚Ç¨500/mo |
| **ScraperAPI** | ‚Ç¨0 (1k req free) | ‚Ç¨49/mo |
| **Resend** | ‚Ç¨0 (3k emails) | ‚Ç¨0 (stays free) |
| **Supabase** | ‚Ç¨0 (Free tier) | ‚Ç¨25/mo (Pro) |
| **Vercel** | ‚Ç¨0 (Hobby) | ‚Ç¨20/mo (Pro) |
| **Monitoring** | ‚Ç¨0 (Sentry Free) | ‚Ç¨26/mo |
| **TOTAL** | **~‚Ç¨195/mo** | **~‚Ç¨1,019/mo** |

**Break-Even:**
- @ ‚Ç¨29/mo subscription
- MVP: 7 paying users
- Scale: 36 paying users

---

## ü§ù Contributing

See [CONTRIBUTING.md](./CONTRIBUTING.md)

---

## üìÑ License

MIT License - See [LICENSE](./LICENSE)

---

## üôè Credits

- **Architecture:** Yannik Galetto
- **AI Models:** Anthropic (Claude), OpenAI (GPT-4o-mini), Perplexity
- **Scraping:** Firecrawl, SerpAPI, ScraperAPI
- **Inspiration:** Vibecoding Manifesto by Jack Roberts

---

## üìö Documentation

- **[ARCHITECTURE.md](./docs/ARCHITECTURE.md)** - Complete system design
- **[SCRAPING_STRATEGY.md](./docs/SCRAPING_STRATEGY.md)** - Smart fallback logic ‚ú® NEW
- **[CLAUDE.md](./CLAUDE.md)** - Agent instructions for AI-assisted development
- **[.env.example](./.env.example)** - Environment variables template

---

**Made with ‚ù§Ô∏è in Berlin**

**Version:** 3.1  
**Last Updated:** 2026-02-07  
**Status:** ‚úÖ Production-Ready Design
